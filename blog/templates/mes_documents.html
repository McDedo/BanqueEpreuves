{% extends "base.html" %}
{% block title %}Mes Documents{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4 text-primary"><i class="bi bi-folder2-open"></i> Mes Documents</h2>

  {% if epreuves or fiches or guides %}
    {% if epreuves %}
      <h4 class="mt-4"><i class="bi bi-file-earmark-text"></i> Épreuves</h4>
      <div class="list-group mb-3">
        {% for epreuve in epreuves %}
          <a href="{{ epreuve.lien_drive }}" target="_blank" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>
              📄 {{ epreuve.titre }} ({{ epreuve.annee }})
              {% if epreuve.lien_drive_corrige %}
                <br><a href="{{ epreuve.lien_drive_corrige }}" target="_blank" class="text-success small">📘 Corrigé disponible</a>
              {% endif %}
            </div>
            <small class="text-muted">{{ epreuve.matiere.nom }} • {{ epreuve.niveau }}</small>
          </a>
        {% endfor %}
      </div>
    {% endif %}

    {% if fiches %}
      <h4 class="mt-4"><i class="bi bi-journal-text"></i> Fiches de cours</h4>
      <div class="list-group mb-3">
        {% for fiche in fiches %}
          <a href="{{ fiche.fichier.url }}" target="_blank" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>📝 {{ fiche.titre }}</div>
            <small class="text-muted">{{ fiche.matiere.nom }} • {{ fiche.niveau }}</small>
          </a>
        {% endfor %}
      </div>
    {% endif %}

    {% if guides %}
      <h4 class="mt-4"><i class="bi bi-book"></i> Guides de formation</h4>
      <div class="list-group mb-3">
        {% for guide in guides %}
          <a href="{{ guide.fichier.url }}" target="_blank" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>📘 {{ guide.titre }}</div>
            <small class="text-muted">{{ guide.matiere.nom }} • {{ guide.niveau }}</small>
          </a>
        {% endfor %}
      </div>
    {% endif %}
  {% else %}
    <div class="alert alert-info" role="alert">
      <i class="bi bi-info-circle"></i> Vous n'avez encore téléchargé aucun document.
    </div>
  {% endif %}
</div>
{% endblock %}
